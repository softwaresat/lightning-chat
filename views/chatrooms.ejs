<!DOCTYPE html>
<html>
   <head>
      <title>All Chatrooms - Lightning Chat</title>
      <meta name="description" content="Chat with others!">
      <link rel="stylesheet" href="styles/main.css">
      <link rel="stylesheet" href="styles/roomlist.css">
      <link href="/bootstrap-5.1.3-dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">
      <link rel="shortcut icon" type="image/jpg" href="https://media.discordapp.net/attachments/761286162333171734/904834737888198726/unknown.png"/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
      <script        
      <script src="/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
      <style>
         .card-title{
         font-size: xx-large;
         }
         li:hover{
         background-color:#86bbd8;
         }
      </style>
            <script defer data-domain="lightningchat.live" src="https://plausible.yeetpc.com/js/plausible.js"></script>
   </head>
   <body>
      <nav class="navbar navbar-expand-lg fixed-top navbar-dark" style='background-color:#004766; margin-bottom: 20%;'>
         <div class="container-fluid">
            <a class="navbar-brand" style="color: #ffd166"href="/">Lightning âš¡</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
               <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                     <a class="nav-link active" aria-current="page" href="/chatrooms">Chatrooms</a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link active" aria-current="page" href="/newchatroom">New Chatroom</a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link active" aria-current="page" href="/help">Help</a>
                  </li>
               </ul>
               <% if(loggedin == true){ %>
               <h5 class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" style='color: #b7b7b7;'aria-expanded="false">
               <%=name1%>
               </a>
               <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="/account">Account</a></li>
                  <li><a class="dropdown-item" href="/logout">Logout</a></li>
               </ul>
               </li>
               <% }else{ %>
               <form class="d-flex">
                  <a class="btn btn-outline-success" style = 'margin-right: 5%;'href='/login'>Login</a>
               </form>
               <% } %>
            </div>
         </div>
         </div>
      </nav>
      <div class="dropdown">
         <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
            <li><a class="dropdown-item" href="#">New project...</a></li>
            <li><a class="dropdown-item" href="#">Settings</a></li>
            <li><a class="dropdown-item" href="#">Profile</a></li>
            <li>
               <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" href="#">Sign out</a></li>
         </ul>
      </div>
      </div>
      <%let count = 0%>
      <div class="buffer-top">
         <p>buffer</p>
      </div>
      <div class="grid">
         <% print.forEach(function (result) { %>
         <div class="card" style="width: 100%;float:right; margin-top: 10%;">
            <div class="card-body" id = <%= result.name%> style = 'text-align:center;'>
               <h5 style="color: white;"class="card-title"><%= result.name %></h5>
               <p style='color:white; font-size:medium;'><%=result.author%></p>
               <a href= <%='/room?name='+encodeURIComponent(result.name)%> class="btn btn-primary">Join</a>
               <% if(result.author == name1) { %>
               <a href= <%='/roomdetails?name='+encodeURIComponent(result.name)%> class="btn btn-primary">Edit</a>
               <% } %>
            </div>
         </div>
         <% }) %>
         <% other.forEach(function (result) { %>
         <div class="card" style="width: 100%;float:right;margin-top: 5%;">
            <div class="card-body" id = <%= result.name%> style = 'text-align:center;'>
               <h5 class="card-title"><%= result.name %></h5>
               <a href= <%='/room?name='+encodeURIComponent(result.name)%> class="btn btn-primary">Join</a>
            </div>
         </div>
         <% }) %>
      </div>
   </body>
</html>